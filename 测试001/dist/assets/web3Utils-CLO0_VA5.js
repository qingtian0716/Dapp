import{w as e,b as o,i as r}from"./transactionHelper-CcnemSdY.js";import{s as a}from"./error-DxBeLxpQ.js";async function h(){if((!e||!o)&&!await r())return a("请先连接钱包","warning"),!1;try{return(await e.eth.getAccounts()).length===0?(a("请先连接钱包","warning"),!1):!0}catch(t){return console.error("检查Web3连接失败:",t),a("检查钱包连接失败","error"),!1}}function u(t=5*60*1e3){return{data:null,timestamp:null,expirationTime:t,isValid(){return this.data&&this.timestamp&&Date.now()-this.timestamp<this.expirationTime},update(n){this.data=n,this.timestamp=Date.now()},clear(){this.data=null,this.timestamp=null}}}async function l(){if(!e)throw new Error("Web3未初始化");const t=await e.eth.getChainId(),n=await e.eth.net.getId(),i=await e.eth.net.isListening();return{chainId:t,networkId:n,isListening:i,networkType:{1:"Ethereum Mainnet",3:"Ropsten Testnet",4:"Rinkeby Testnet",5:"Goerli Testnet",42:"Kovan Testnet",56:"BSC Mainnet",97:"BSC Testnet",137:"Polygon Mainnet",80001:"Polygon Mumbai",31337:"Hardhat Network",1337:"Local Network"}[t]||"Unknown Network"}}export{h as a,u as c,l as g};
